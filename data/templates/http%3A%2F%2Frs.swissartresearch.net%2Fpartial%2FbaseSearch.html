<semantic-search
categories='{
  "<http://www.cidoc-crm.org/cidoc-crm/E52_Time-Span>": [{
    "kind": "date-range",
    "queryPattern": "{
      $subject ?__relation__ ?date .
      FILTER(?date >= ?__dateBeginValue__ && ?date <= ?__dateEndValue__)
    }"
  }]
}'
search-profile='{
    "categories": [
        {"iri": "<http://www.cidoc-crm.org/cidoc-crm/E22_Man-Made_Object>", "label": "Thing", "thumbnail": "../images/fcs/things.svg"},
        {"iri": "<http://www.cidoc-crm.org/cidoc-crm/E39_Actor>", "label": "Actor", "thumbnail": "../images/fcs/actors.svg"},
        {"iri": "<http://www.cidoc-crm.org/cidoc-crm/E53_Place>", "label": "Place", "thumbnail": "../images/fcs/places.svg"},
        {"iri": "<http://www.cidoc-crm.org/cidoc-crm/E52_Time-Span>", "label": "Time", "thumbnail": "../images/fcs/dates.svg"},
        {"iri": "<http://rs.swissartresearch.net/Concept>", "label": "Concept", "thumbnail": "../images/fcs/concepts.svg"}
      ],
    "relations": [
      {
        "iri": "<http://rs.swissartresearch.net/Thing_by_Actor>",
        "hasDomain": "<http://www.cidoc-crm.org/cidoc-crm/E22_Man-Made_Object>",
        "hasRange": "<http://www.cidoc-crm.org/cidoc-crm/E39_Actor>",
        "label": "by"
      },
      {
        "iri": "<http://rs.swissartresearch.net/Thing_held_by_Actor>",
        "hasDomain": "<http://www.cidoc-crm.org/cidoc-crm/E22_Man-Made_Object>",
        "hasRange": "<http://www.cidoc-crm.org/cidoc-crm/E39_Actor>",
        "label": "held by"
      },
      {
        "iri": "<http://rs.swissartresearch.net/Thing_from_Time>",
        "hasDomain": "<http://www.cidoc-crm.org/cidoc-crm/E22_Man-Made_Object>",
        "hasRange": "<http://www.cidoc-crm.org/cidoc-crm/E52_Time-Span>",
        "label": "from"
      },
      {
        "iri": "<http://rs.swissartresearch.net/Thing_depicts_Place>",
        "hasDomain": "<http://www.cidoc-crm.org/cidoc-crm/E22_Man-Made_Object>",
        "hasRange": "<http://www.cidoc-crm.org/cidoc-crm/E53_Place>",
        "label": "depicts"
      },
      {
        "iri": "<http://rs.swissartresearch.net/Actor_is_creator_of_Thing>",
        "hasDomain": "<http://www.cidoc-crm.org/cidoc-crm/E39_Actor>",
        "hasRange": "<http://www.cidoc-crm.org/cidoc-crm/E22_Man-Made_Object>",
        "label": "is creator of"
      }
    ]
  }'
relations='{
  "<http://rs.swissartresearch.net/Thing_by_Actor>": [{
    "kind": "resource",
    "queryPattern": "
      {
        ?subject crm:P128_carries/crm:P94i_was_created_by/crm:P14_carried_out_by ?__value__ .
      }
    "
  }],
  "<http://rs.swissartresearch.net/Thing_held_by_Actor>": [{
    "kind": "resource",
    "queryPattern": "
      {
        ?subject crm:P109_has_former_or_current_curator ?__value__ .
      }
    "
  }],
  "<http://rs.swissartresearch.net/Thing_depicts_Place>": [{
    "kind": "resource",
    "queryPattern": "
      {
        ?subject crm:P128_carries/crm:P138_represents ?__value__ .
        ?__value__ a crm:E53_Place .
      }
    "
  }],
  "<http://rs.swissartresearch.net/Thing_from_Time>": [{
    "kind": "date-range",
    "queryPattern": "
      {
        ?subject (crm:P108i_was_produced_by|(crm:P128_carries/crm:P94i_was_created_by))/crm:P4_has_time-span ?date .
        ?date crm:P82a_begin_of_the_begin ?begin ;
          crm:P82b_end_of_the_end ?end .
        FILTER(STRDT(STR(?begin), xsd:date) <= ?__dateEndValue__) .
        FILTER(STRDT(STR(?end), xsd:date) >= ?__dateBeginValue__) .
      }
    "
  }],
  "<http://rs.swissartresearch.net/Actor_is_creator_of_Thing>": [{
    "kind": "resource",
    "queryPattern": "
      {
        ?__value__ crm:P128_carries/crm:P94i_was_created_by/crm:P14_carried_out_by ?subject.
    }
  "
  }]
}'
>

  [[> @partial-block ]]

  <semantic-search-facet-breadcrumbs>
  </semantic-search-facet-breadcrumbs>

  <semantic-search-facet
    open-by-default="true"
    value-relations='{
      "<http://rs.swissartresearch.net/Thing_from_Time>": {
        "kind": "date-range",
        "valuesQuery":"
          SELECT ?dateBeginValue ?dateEndValue WHERE {
            ?subject (crm:P108i_was_produced_by|(crm:P128_carries/crm:P94i_was_created_by))/crm:P4_has_time-span ?date .
            ?date crm:P82a_begin_of_the_begin ?dateBeginValue ;
              crm:P82b_end_of_the_end ?dateEndValue .
          } ORDER BY ?dateBeginValue"
      }
    }'
  >

  </semantic-search-facet>
  
  <semantic-search-result-holder>

    <semantic-search-result>
      <div class="panelView">
        <semantic-table 
          id="panel-result"
          query="SELECT ?subject WHERE {} ORDER BY ?subject" 
          tuple-template='{{> gridTemplate}}'
          options='{"showFilter": false}'
        >
          <template id="gridTemplate">
            {{> partial:panelObject iri=subject.value displayMenu="true"}}
          </template>
        </semantic-table>
      </div>
    </semantic-search-result>

  </semantic-search-result-holder>

</semantic-search>