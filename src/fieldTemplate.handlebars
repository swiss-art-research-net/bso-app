@prefix crm: <http://www.cidoc-crm.org/cidoc-crm/> .
@prefix ldp: <http://www.w3.org/ns/ldp#> .
@prefix mpo: <http://www.researchspace.org/resource/system/fields/> .
@prefix prov: <http://www.w3.org/ns/prov#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix sp: <http://spinrdf.org/sp#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix User: <http://www.researchspace.org/resource/user/> .

<http://www.researchspace.org/resource/system/fieldDefinitionContainer/context> {
  <http://www.researchspace.org/resource/system/fieldDefinitionContainer> rdfs:comment "Container to store field definitions.";
    a ldp:Container, ldp:Resource, prov:Entity ;
    rdfs:label "Form Container";
    prov:wasAttributedTo User:admin ;
    prov:generatedAtTime "2020-04-06T13:49:19.238+03:00"^^xsd:dateTime .
}

{{#each fields}}

    <{{ ../prefix }}{{ id }}/context> {

        <http://www.researchspace.org/resource/system/fieldDefinitionContainer> ldp:contains <{{ ../prefix }}{{ id }}> .

        <{{ ../prefix }}{{ id }}> 
        {{#if label}}
            rdfs:label "{{ label }}" ;
        {{/if}}
        {{#if description}}
            rdfs:comment "{{ description }}" ;
        {{/if}}
        {{#if minOccurs}}
            mpo:minOccurs "{{ minOccurs }}" ;
        {{/if}}
        {{#if maxOccurs}}
            mpo:maxOccurs "{{ maxOccurs }}" ;
        {{/if}}
        {{#if datatype}}
            mpo:xsdDatatype {{ datatype }} ;
        {{/if}}
        {{#if domain}}
            mpo:domain {{ domain }} ;
        {{/if}}
        {{#if range}}
            mpo:range {{ range }} ;
        {{/if}}
        {{#each queries }}
            {{#if insert}}
                mpo:insertPattern <{{ ../../prefix }}{{../id}}/query/insert> ;
            {{/if}}
            {{#if select}}
                mpo:selectPattern <{{ ../../prefix }}{{../id}}/query/select> ;
            {{/if}}
            {{#if ask}}
                mpo:askPattern <{{ ../../prefix }}{{../id}}/query/ask> ;
            {{/if}}
            {{#if delete}}
                mpo:deletePattern <{{ ../../prefix }}{{../id}}/query/delete> ;
            {{/if}}
        {{/each}}
    
        a mpo:Field, ldp:Resource, prov:Entity ;
        prov:wasAttributedTo User:admin ;
        prov:generatedAtTime "2021-01-08T11:43:46.111Z"^^xsd:dateTime .

        {{#each queries }}
            {{#if insert}}
                <{{ ../../prefix }}{{../id}}/query/insert> a sp:Query;
                    sp:text """{{ insert }}""" .
            {{/if}}
            {{#if select}}
                <{{ ../../prefix }}{{../id}}/query/select> a sp:Query;
                    sp:text """{{ select }}""" .
            {{/if}}
            {{#if ask}}
                <{{ ../../prefix }}{{../id}}/query/ask> a sp:Query;
                    sp:text """{{ ask }}""" .
            {{/if}}
            {{#if delete}}
                <{{ ../../prefix }}{{../id}}/query/delete> a sp:Query;
                    sp:text """{{ delete }}""" .
            {{/if}}
        {{/each}}
    
    }
{{/each}}