output: ../ldp/assets/fieldDefinitions.trig

prefix: http://rs.swissartresearch.net/instances/fields/
container: http://www.metaphacts.com/ontologies/platform#fieldDefinitionContainer
namespaces:
  crm: http://www.cidoc-crm.org/cidoc/crm/
  rdfs: http://www.w3.org/2000/01/rdf-schema#
  search: http://rs.swissartresearch.net/search/

fields:

    - id: collection
      label: Collection
      description: The holding collection or institution of the work
      datatype: xsd:anyURI
      queries:
        - select: 'SELECT ?value WHERE {
            $subject crm:P109_has_former_or_current_curator ?value .
          }'
            
    - id: creator_of_object
      label: Creator
      description: The creator of the artwork 
      datatype: xsd:anyURI
      queries:
        - insert: 'INSERT { 
          ?creation crm:P14_carried_out_by $value .
        } WHERE {
          BIND(CONCAT(STR($subject), "/creation") as ?creation)
        }'
        
        - select: 'SELECT ?value ?label WHERE {
          $subject crm:P128_carries/crm:P94i_was_created_by/crm:P14_carried_out_by ?value.
          OPTIONAL {
            BIND(URI(CONCAT(STR($subject), "/meta")) as ?subject_meta )
            ?value crm:P1_is_identified_by ?appellation .
            ?appellation rdfs:label ?label ;
              crm:P70i_is_documented_in ?subject_meta . 
          }
        }'

    - id: objects_created
      label: Created
      description: Objects that were created by an actor
      datatype: xsd:anyURI
      queries:
        - select: 'SELECT ?value ?label WHERE {
          ?value crm:P128_carries/crm:P94i_was_created_by/crm:P14_carried_out_by $subject ;
            rdfs:label ?object_label .
          OPTIONAL {
            ?value crm:P128_carries/crm:P94i_was_created_by/crm:P9_consists_of ?subcreation .
            ?subcreation crm:P14_carried_out_by $subject ;
              crm:P2_has_type/rdfs:label ?role_label .
          }
          BIND(IF(BOUND(?role_label), CONCAT(?object_label, " (", ?role_label, ")"), ?object_label) as ?label)
        }
        '

    - id: object_depicts
      label: Depicts
      description: The entity that is depicted by the object
      datatype: xsd:anyURI
      queries:
        - select: 'SELECT ?value WHERE {
            $subject crm:P128_carries/crm:P138_represents ?value .
          }'
        - insert: 'INSERT {
            ?work crm:P138_represents $value .
          } WHERE {
            $subject crm:P128_carries ?work .
          }'
        - values: 'SELECT ?value ?label ?type WHERE {
            VALUES(?type) {
              (search:Person)
              (search:Place)
              (search:Type)
            }
            ?value a ?type ;
              rdfs:label ?label .
          } ORDER BY ?label'

    - id: label
      label: Label
      description: A human-readable label for the entity
      datatype: xsd:string
      minOccurs: 0
      maxOccurs: 1
      queries:
        - insert: 'INSERT { 
            $subject rdfs:label $value .
          } WHERE {}'
        - select: 'SELECT ?value WHERE {
            $subject rdfs:label ?value .
          }'
    
    - id: object_carries_visual_item
      label: Visual Item
      description: The E36 Visual Item carried by the E22 Human-Made Object
      datatype: xsd:anyURI
      minOccurs: 1
      maxOccurs: 1
      domain: crm:E22_Man-Made_Object
      range: crm:E36_Visual_item
      queries:
        - insert: 'INSERT { $subject crm:P128_carries $value} WHERE {}'
        - select: 'SELECT ?value WHERE {
            $subject crm:P128_carries ?value .
            ?value a crm:E36_Visual_Item .
          }'
