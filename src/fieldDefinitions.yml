output: ../ldp/assets/fieldDefinitions.trig

prefix: https://platform.swissartresearch.net/instances/fields/
container: http://www.metaphacts.com/ontologies/platform#fieldDefinitionContainer
namespaces:
  aat: http://vocab.getty.edu/aat/
  crm: http://www.cidoc-crm.org/cidoc-crm/
  crmdig: http://www.ics.forth.gr/isl/CRMdig/
  crminf: http://www.ics.forth.gr/isl/CRMinf/
  la: http://www.linkedart.org/schema/
  rdfs: http://www.w3.org/2000/01/rdf-schema#
  prov: http://www.w3.org/ns/prov#
  search: https://platform.swissartresearch.net/search/

fields:

    - id: container_form_id
      label: Form for creating the data in the container
      description: The identifier of the form that created the data in the container
      datatype: xsd:anyURI
      minOccurs: 1
      maxOccurs: 1
      queries:
        - insert: 'INSERT {
            ?container prov:used $value .
          } WHERE {
            BIND(URI(CONCAT(STR($subject), "/container")) as ?container)
          }'
        - select: 'SELECT ?value WHERE {
            BIND(URI(CONCAT(STR($subject), "/container")) as ?container)
            ?container prov:used ?value .
          }'

      
    - id: collection
      label: Collection
      description: The holding collection or institution of the work
      datatype: xsd:anyURI
      domain: crm:E22_Human-Made_Object
      range: crm:E39_Actor
      materialise: True
      queries:
        - select: 'SELECT ?value WHERE {
            $subject crm:P109_has_current_or_former_curator ?value .
          }'
            
    - id: creator_of_object
      label: Creator
      description: The creator of the artwork 
      datatype: xsd:anyURI
      domain: crm:E22_Human-Made_Object
      range: crm:E39_Actor
      materialise: True
      queries:
        - insert: 'INSERT { 
          ?creation crm:P14_carried_out_by $value .
        } WHERE {
          BIND(CONCAT(STR($subject), "/creation") as ?creation)
        }'
        
        - select: 'SELECT ?value ?label WHERE {
          $subject crm:P128_carries/crm:P94i_was_created_by/crm:P14_carried_out_by ?value.
          OPTIONAL {
            BIND(URI(CONCAT(STR($subject), "/meta")) as ?subject_meta )
            ?value crm:P1_is_identified_by ?appellation .
            ?appellation rdfs:label ?label ;
              crm:P70i_is_documented_in ?subject_meta . 
          }
        }'

    - id: date_from
      label: Earliest date
      description: The beginning of a time frame
      datatype: xsd:dateTime
      queries:
        - select: 'SELECT ?value WHERE {
          $subject crm:P82a_begin_of_the_begin ?value
          }'

    - id: date_to
      label: Latest date
      description: The end of a time frame
      datatype: xsd:dateTime
      queries:
        - select: 'SELECT ?value WHERE {
          $subject crm:P82b_end_of_the_end ?value
          }'

    - id: label
      label: Label
      description: A human-readable label for the entity
      datatype: xsd:string
      minOccurs: 0
      maxOccurs: 1
      queries:
        - insert: 'INSERT { 
            $subject rdfs:label $value .
          } WHERE {}'
        - select: 'SELECT ?value WHERE {
            $subject rdfs:label ?value .
          }'
          
    - id: notes
      label: Notes
      description: Notes about the entity
      datatype: xsd:string
      minOccurs: 0
      queries:
        - insert: 'INSERT { 
            $subject crm:P3_has_note $value .
          } WHERE {}'
        - select: 'SELECT ?value WHERE {
            $subject crm:P3_has_note ?value .
          }'
    
    - id: objects_created
      label: Created
      description: Objects that were created by an actor
      datatype: xsd:anyURI
      domain: crm:E39_Actor
      range: crm:E22_Human-Made_Object
      display: hidden
      materialise: True
      queries:
        - select: 'SELECT ?value ?label WHERE {
          ?value crm:P128_carries/crm:P94i_was_created_by/crm:P14_carried_out_by $subject ;
            rdfs:label ?object_label .
          OPTIONAL {
            ?value crm:P128_carries/crm:P94i_was_created_by/crm:P9_consists_of ?subcreation .
            ?subcreation crm:P14_carried_out_by $subject ;
              crm:P2_has_type/rdfs:label ?role_label .
          }
          BIND(IF(BOUND(?role_label), CONCAT(?object_label, " (", ?role_label, ")"), ?object_label) as ?label)
        }
        '

    - id: object_creation_date
      label: Creation date
      description: The date an object has been created
      datatype: xsd:anyURI
      domain: crm:E22_Human-Made_Object
      range: crm:E52_Time-Span
      queries:
        - select: 'SELECT ?value WHERE {
            $subject crm:P128_carries/crm:P94i_was_created_by/crm:P4_has_time-span ?value
          }'

    - id: object_depicts
      label: Depicts
      description: The entity that is depicted by the object
      datatype: xsd:anyURI
      domain: crm:E22_Human-Made_Object
      range: crm:E1_CRM_Entity
      materialise: True
      queries:
        - select: 'SELECT DISTINCT ?value WHERE {
            $subject crm:P128_carries/crm:P138_represents ?value .
          }'
        - insert: 'INSERT {
            ?work crm:P138_represents $value .
          } WHERE {
            $subject crm:P128_carries ?work .
          }'
        - autosuggestion: 'PREFIX bds: <http://www.bigdata.com/rdf/search#>
          SELECT DISTINCT ?value ?label ?type ?typeLabel WHERE {
            VALUES(?type ?typeLabel) {
              (search:Person "Person")
              (search:Place "Place")
              (search:Type "Type")
            }
            ?value a ?type ;
              rdfs:label ?search_label .
            OPTIONAL {
              ?value skos:prefLabel ?prefLabel
            }
            BIND(IF(BOUND(?prefLabel), ?prefLabel, ?search_label) as ?label)
            ?search_label bds:search ?__token__ .
          } ORDER BY ?label
          LIMIT 10'
        - valueSet: 'SELECT ?value ?label ?type ?typeLabel WHERE {
            VALUES(?type ?typeLabel) {
              (search:Person "Person")
              (search:Place "Place")
              (search:Type "Type")
            }
            ?value a ?type ;
              rdfs:label ?label .
          } ORDER BY ?label
          LIMIT 100'

    - id: object_depicts_as_P141_to_work
      label: Depicts
      description: The entity that is depicted by the object
      datatype: xsd:anyURI
      domain: crm:E13_Attribute_Assignment
      range: crm:E1_CRM_Entity
      minOccurs: 1
      queries:
        - select: 'SELECT DISTINCT ?value WHERE {
            $subject crm:P141_assigned ?value .
          }'
        - insert: 'INSERT {
            $subject crm:P141_assigned $value .
            ?work crm:P138_represents $value .
          } WHERE {
            BIND(URI(CONCAT(STRBEFORE(STR($subject), "/proposition"), "/work")) as ?work)
          }'
        - autosuggestion: 'PREFIX bds: <http://www.bigdata.com/rdf/search#>
          SELECT DISTINCT ?value ?label ?type ?typeLabel ?score WHERE {
            VALUES(?type ?typeLabel) {
              (search:Person "Person")
              (search:Place "Place")
              (search:Type "Type")
            }
            ?value a ?type ;
              rdfs:label ?search_label .
            OPTIONAL {
              ?value skos:prefLabel ?prefLabel
            }
            BIND(IF(BOUND(?prefLabel), ?prefLabel, ?search_label) as ?label)
            ?search_label bds:search ?__token__ ;
              bds:matchAllTerms "true" ;
              bds:relevance ?score .
          } ORDER BY DESC(?score) ?label
          LIMIT 100'
        - valueSet: 'SELECT ?value ?label ?type ?typeLabel WHERE {
            VALUES(?type ?typeLabel) {
              (search:Person "Person")
              (search:Place "Place")
              (search:Type "Type")
            }
            ?value a ?type ;
              rdfs:label ?label .
          } ORDER BY ?label
          LIMIT 100'

    - id: object_depicts_as_P141_to_proposition_subject
      label: Depicts
      description: The entity that is depicted by the proposition_subject
      datatype: xsd:anyURI
      domain: crm:E13_Attribute_Assignment
      range: crm:E1_CRM_Entity
      minOccurs: 1
      queries:
        - select: 'SELECT DISTINCT ?value WHERE {
            $subject crm:P141_assigned ?value .
          }'
        - insert: 'INSERT {
            $subject crm:P141_assigned $value .
            ?proposition_subject crm:P138_represents $value .
          } WHERE {
            BIND(URI(STRBEFORE(STR($subject), "/proposition")) as ?proposition_subject)
          }'
        - autosuggestion: 'PREFIX bds: <http://www.bigdata.com/rdf/search#>
          SELECT DISTINCT ?value ?label ?type ?typeLabel ?score WHERE {
            VALUES(?type ?typeLabel) {
              (search:Person "Person")
              (search:Place "Place")
              (search:Type "Type")
            }
            ?value a ?type ;
              rdfs:label ?search_label .
            OPTIONAL {
              ?value skos:prefLabel ?prefLabel
            }
            BIND(IF(BOUND(?prefLabel), ?prefLabel, ?search_label) as ?label)
            ?search_label bds:search ?__token__ ;
              bds:matchAllTerms "true" ;
              bds:relevance ?score .
          } ORDER BY DESC(?score) ?label
          LIMIT 100'
        - valueSet: 'SELECT ?value ?label ?type ?typeLabel WHERE {
            VALUES(?type ?typeLabel) {
              (search:Person "Person")
              (search:Place "Place")
              (search:Type "Type")
            }
            ?value a ?type ;
              rdfs:label ?label .
          } ORDER BY ?label
          LIMIT 100'

    - id: object_description
      label: Description
      datatype: xsd:anyURI
      queries:
      - select: 'SELECT ?value WHERE {
          $subject crm:P129i_is_subject_of ?value .
          ?value crm:P2_has_type aat:300435416 .
        }'
        

    - id: object_subcreations
      label: Creation Steps
      descriptions: The sub-creations for an object
      datatype: xsd:anyURI
      display: hidden
      domain: crm:E22_Human-Made_Object
      range: crm:E65_Creation
      queries:
        - select: 'SELECT ?value WHERE {
            $subject crm:P128_carries/crm:P94i_was_created_by ?creation .
            ?creation crm:P9_consists_of ?value .
          }'
        - insert: 'INSERT {
            ?creation crm:P9_consists_of ?value .
          } WHERE {
            BIND(URI(CONCAT(STR($subject), "/creation")) as ?creation)
          }'

    - id: object_subproductions
      label: Production Steps
      descriptions: The production steps for an object
      datatype: xsd:anyURI
      display: hidden
      domain: crm:E22_Human-Made_Object
      range: E12_Production
      queries:
        - select: 'SELECT ?value WHERE {
            $subject crm:P108i_was_produced_by/crm:P9_consists_of ?value .
          }'
        - insert: 'INSERT {
            ?production crm:P9_consists_of ?value .
          } WHERE {
            BIND(URI(CONCAT(STR($subject), "/production")) as ?production)
          }'

    - id: object_caption
      label: Caption/Inscription
      description: An inscription on the object, typically a captin
      datatype: xsd:string
      domain: crm:E22_Human-Made_Object
      queries:
        - select: 'SELECT ?value WHERE {
          $subject crm:P128_carries ?inscription .
          ?inscription a crm:E34_Inscription ;
            rdfs:label ?value .
          }'


    - id: object_carries_visual_item
      label: Visual Item
      description: The E36 Visual Item carried by the E22 Human-Made Object
      datatype: xsd:anyURI
      display: hidden
      minOccurs: 1
      maxOccurs: 1
      domain: crm:E22_Human-Made_Object
      range: crm:E36_Visual_item
      queries:
        - insert: 'INSERT { $subject crm:P128_carries $value} WHERE {}'
        - select: 'SELECT ?value WHERE {
            $subject crm:P128_carries ?value .
            ?value a crm:E36_Visual_Item .
          }'

    - id: object_material
      label: Material
      datatype: xsd:anyURI
      description: The material of the object
      domain: crm:E22_Human-Made_Object
      range: crm:E57_Material
      queries:
        - select: 'SELECT ?value WHERE {
            $subject crm:P45_consists_of ?value .
        }'

    - id: object_part_dimensions
      label: Dimension (Parts)
      datatype: xsd:string
      description: The dimension of the parts of the object
      domain: crm:E22_Human-Made_Object
      queries:
        - select: 'SELECT ?value WHERE {
              $subject crm:P46_is_composed_of ?part .
              OPTIONAL {
                ?part crm:P3_has_note ?part_note .
              }
              {
                SELECT ?part ?part_type_label (GROUP_CONCAT(?dimension_string;SEPARATOR=", ") as ?dimension_string_complete) WHERE {
                  ?part crm:P43_has_dimension ?dimension ;
                        crm:P2_has_type/rdfs:label ?part_type_label .
                  {
                    SELECT ?dimension ?dimension_string WHERE {
                      ?dimension crm:P2_has_type/rdfs:label ?dimension_type_label ;
                              crm:P90_has_value ?dimension_value ;
                              crm:P91_has_unit/rdfs:label ?dimension_unit .
                      BIND(CONCAT(?dimension_type_label, ": ", ?dimension_value, " ", ?dimension_unit) as ?dimension_string)
                    } ORDER BY ?dimension_type_label
                  }
                } GROUP BY ?part ?part_type_label
              }
              BIND(CONCAT(?part_type_label, IF(BOUND(?part_note),CONCAT(" (", ?part_note, ")"),""), ": ", ?dimension_string_complete) as ?value)
            }'

    - id: object_production_date
      label: Production date
      datatype: xsd:anyURI
      description: The date an object has been produced
      domain: crm:E22_Human-Made_Object
      range: crm:E52_Time-Span
      queries:
        - select: 'SELECT ?value WHERE {
            $subject crm:P108i_was_produced_by/crm:P4_has_time-span ?value
          }'
      
    - id: object_production_technique
      label: Technique
      datatype: xsd:anyURI
      description: The production technique of the artwork
      domain: crm:E22_Human-Made_Object
      range: crm:E55_Type
      queries:
        - select: 'SELECT ?value WHERE {
            $subject crm:P108i_was_produced_by/crm:P32_used_general_technique ?value .
          }'

    - id: region_for_proposition_subject
      label: Regions
      datatype: xsd:anyURI
      queries:
        - select: 'SELECT ?value WHERE {
            BIND(URI(STRBEFORE(STR($subject), "/proposition")) as ?propositionSubject)
            ?propositionSubject crm:P128_carries/la:digitally_shown_by/la:digitally_available_via/la:access_point ?iiif_image .
            ?value crmdig:L49_is_primary_area_of ?iiif_image .
          }' 

    - id: I4_Proposition_Set_about_Subject
      label: I4 Proposition Set about Subject
      description: Takes a URI or string (which will be attached to the subject to create a URI) and defines it as a I4 Proposition set that is P129 about the subject and P67 refers to the proposition's subject 
      datatype: xsd:string
      queries:
        - insert: 'INSERT {
          ?valueSubject a crminf:I4_Proposition_Set ;
            crm:P129_is_about $subject ;
            crm:P67_refers_to ?propositionSubject .
        } WHERE {
          BIND((IF(STR(URI(?value)) = ?value, True,False)) as ?isURI)
          BIND(IF(?isURI, URI(?value), URI(CONCAT(STR($subject), STR(?value)))) as ?valueSubject)
          BIND(URI(STRBEFORE(STR($subject), "/proposition")) as ?propositionSubject)
        }'

    - id: L54_is_same-as
      label: Same as
      datatype: xsd:anyURI
      queries: 
        - insert: 'INSERT {
            $subject crmdig:L54_is_same-as ?value .
          } WHERE {}'
        - select: 'SELECT ?value WHERE {
            $subject crmdig:L54_is_same-as ?value .
            }'

    - id: subproduction_type
      label: Type of production
      minOccurs: 1
      maxOccurs: 1
      datatype: xsd:anyURI
      queries:
        - insert: 'INSERT {
            $subject a $value .
          } WHERE {}'
        - select: 'SELECT ?value WHERE {
            $subject a ?value .
            VALUES (?value) {
              (crm:E7_Activity)
              (crm:E11_Modification)
              (crm:E12_Production)
            }
          }' 
        - valueSet: 'SELECT ?value ?label WHERE {
          VALUES (?value ?label) {
              (crm:E12_Production "Production (engraving, printing, ...)")
              (crm:E11_Modification "Modification (colouring, ...)")
              (crm:E7_Activity "Activity (commissioning, publishing, ...)")
          }
        }'

    - id: type
      label: The RDF Data Type
      datatype: xsd:anyURI
      display: hidden
      queries:
        - insert: 'INSERT {
            $subject a $value .
          } WHERE { }'
        - select: 'SELECT ?value WHERE {
            $subject a ?value .
          }' 

    - id: P1_is_identified_by
      label: Identifier
      datatype: xsd:string
      queries:
        - select: 'SELECT ?value WHERE {
            $subject crm:P1_is_identified_by ?value .
          }'
        - insert: 'INSERT {
            $subject crm:P1_is_identified_by ?value .
          } WHERE {}'

    - id: P2_has_type
      label: Type
      datatype: xsd:anyURI
      queries:
        - select: 'SELECT ?value WHERE {
            $subject crm:P2_has_type ?value .
          }'
        - insert: 'INSERT {
            $subject crm:P2_has_type $value .
          } WHERE {}'
        - autosuggestion: 'PREFIX bds: <http://www.bigdata.com/rdf/search#>
            SELECT DISTINCT ?value ?label WHERE {
              ?value a crm:E55_Type ;
                rdfs:label ?label .
              ?label bds:search ?__token__ .
            } ORDER BY ?label
            LIMIT 10'
        - valueSet: 'SELECT ?value ?label  WHERE {
              ?value a crm:E55_Type ;
                rdfs:label ?label .
            } ORDER BY ?label
            LIMIT 100'

    - id: P9_consists_of-reversed
      label: Consists of (reversed)
      datatype: xsd:anyURI
      queries:
        - insert: 'INSERT {
            ?value crm:P9_consists_of $subject .
          } WHERE {}'
        - select: 'SELECT ?value WHERE {
            ?value crm:P9_consists_of $subject .
          }'

    - id: P14_carried_out_by
      label: Person
      description: The person or actor carrying out an event
      datatype: xsd:anyURI
      minOccurs: 0
      maxOccurs: 1
      queries:
        - select: 'SELECT ?value WHERE {
              $subject crm:P14_carried_out_by ?value .
            }'
        - insert: 'INSERT {
              $subject crm:P14_carried_out_by ?value .
            } WHERE {}'
        - autosuggestion: 'PREFIX bds: <http://www.bigdata.com/rdf/search#>
            SELECT DISTINCT ?value ?label WHERE {
              ?value a search:Person ;
                rdfs:label ?label .
              ?label bds:search ?__token__ .
            } ORDER BY ?label
            LIMIT 10'
        - valueSet: 'SELECT ?value ?label  WHERE {
              ?value a search:Person ;
                rdfs:label ?label .
            } ORDER BY ?label
            LIMIT 100'
    
    - id: P140_assigned_attribute_to
      label: Assigned attribute to
      description: The entity to which an attribute was assigned
      datatype: xsd:anyURI
      minOccurs: 0
      maxOccurs: 1
      queries:
        - select: 'SELECT ?value WHERE {
            $subject crm:P140_assigned_attribute_to ?value .
          }'
        - insert: 'INSERT {
            $subject crm:P140_assigned_attribute_to ?value .
          } WHERE {}'

    - id : see_also
      label: See also
      description: Links to this entity in other databases
      datatype: schema:URL
      queries:
        - select: 'SELECT ?value ?label WHERE {
            BIND(<https://d-nb.info/gnd/10171799-4> as ?nb)
            BIND(<https://d-nb.info/gnd/1012546-2> as ?zbz)
            {
              $subject a search:Object ;
                crm:P109_has_current_or_former_curator ?zbz ;
                crmdig:L1i_was_digitized_by/crmdig:L11_had_output/crm:P1_is_identified_by ?value .
            } UNION {
              $subject a search:Object ;
                crm:P109_has_current_or_former_curator ?nb .
                BIND(STRAFTER(STR($subject), "nb-") as ?nbId)
                BIND(URI(CONCAT("https://www.helveticarchives.ch/detail.aspx?ID=", ?nbId)) as ?value)
                BIND("HelveticArchives" as ?label)
            }
          }'
    