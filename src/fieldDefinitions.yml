output: ../ldp/assets/fieldDefinitions.trig

prefix: https://platform.swissartresearch.net/instances/fields/
container: http://www.metaphacts.com/ontologies/platform#fieldDefinitionContainer
namespaces:
  crm: http://www.cidoc-crm.org/cidoc-crm/
  crminf: http://www.ics.forth.gr/isl/CRMinf/
  rdfs: http://www.w3.org/2000/01/rdf-schema#
  search: https://platform.swissartresearch.net/search/

fields:
      
    - id: collection
      label: Collection
      description: The holding collection or institution of the work
      datatype: xsd:anyURI
      domain: crm:E22_Man-Made_Object
      range: crm:E39_Actor
      materialise: True
      queries:
        - select: 'SELECT ?value WHERE {
            $subject crm:P109_has_former_or_current_curator ?value .
          }'
            
    - id: creator_of_object
      label: Creator
      description: The creator of the artwork 
      datatype: xsd:anyURI
      domain: crm:E22_Man-Made_Object
      range: crm:E39_Actor
      materialise: True
      queries:
        - insert: 'INSERT { 
          ?creation crm:P14_carried_out_by $value .
        } WHERE {
          BIND(CONCAT(STR($subject), "/creation") as ?creation)
        }'
        
        - select: 'SELECT ?value ?label WHERE {
          $subject crm:P128_carries/crm:P94i_was_created_by/crm:P14_carried_out_by ?value.
          OPTIONAL {
            BIND(URI(CONCAT(STR($subject), "/meta")) as ?subject_meta )
            ?value crm:P1_is_identified_by ?appellation .
            ?appellation rdfs:label ?label ;
              crm:P70i_is_documented_in ?subject_meta . 
          }
        }'
 
    - id: label
      label: Label
      description: A human-readable label for the entity
      datatype: xsd:string
      minOccurs: 0
      maxOccurs: 1
      queries:
        - insert: 'INSERT { 
            $subject rdfs:label $value .
          } WHERE {}'
        - select: 'SELECT ?value WHERE {
            $subject rdfs:label ?value .
          }'
    
    - id: objects_created
      label: Created
      description: Objects that were created by an actor
      datatype: xsd:anyURI
      domain: crm:E39_Actor
      range: crm:E22_Man-Made_Object
      display: hidden
      materialise: True
      queries:
        - select: 'SELECT ?value ?label WHERE {
          ?value crm:P128_carries/crm:P94i_was_created_by/crm:P14_carried_out_by $subject ;
            rdfs:label ?object_label .
          OPTIONAL {
            ?value crm:P128_carries/crm:P94i_was_created_by/crm:P9_consists_of ?subcreation .
            ?subcreation crm:P14_carried_out_by $subject ;
              crm:P2_has_type/rdfs:label ?role_label .
          }
          BIND(IF(BOUND(?role_label), CONCAT(?object_label, " (", ?role_label, ")"), ?object_label) as ?label)
        }
        '

    - id: object_creation_date
      label: Creation date
      description: The date an object has been created
      domain: crm:E22_Man-Made_Object
      range: crm:E52_Time-Span
      queries:
        - select: 'SELECT ?value WHERE {
            $subject crm:P128_carries/crm:P94i_was_created_by/crm:P4_has_time-span ?value
          }'

    - id: object_depicts
      label: Depicts
      description: The entity that is depicted by the object
      datatype: xsd:anyURI
      domain: crm:E22_Man-Made_Object
      range: crm:E1_CRM_Entity
      materialise: True
      queries:
        - select: 'SELECT DISTINCT ?value WHERE {
            $subject crm:P128_carries/crm:P138_represents ?value .
          }'
        - insert: 'INSERT {
            ?work crm:P138_represents $value .
          } WHERE {
            $subject crm:P128_carries ?work .
          }'
        - autosuggestion: 'PREFIX bds: <http://www.bigdata.com/rdf/search#>
          SELECT DISTINCT ?value ?label ?type ?typeLabel WHERE {
            VALUES(?type ?typeLabel) {
              (search:Person "Person")
              (search:Place "Place")
              (search:Type "Type")
            }
            ?value a ?type ;
              rdfs:label ?label .
            ?label bds:search ?__token__ .
          } ORDER BY ?label
          LIMIT 10'
        - valueSet: 'SELECT ?value ?label ?type ?typeLabel WHERE {
            VALUES(?type ?typeLabel) {
              (search:Person "Person")
              (search:Place "Place")
              (search:Type "Type")
            }
            ?value a ?type ;
              rdfs:label ?label .
          } ORDER BY ?label
          LIMIT 100'

    - id: object_subcreations
      label: Creation Steps
      descriptions: The sub-creations for an object
      datatype: xsd:anyURI
      display: hidden
      domain: crm:E22_Man-Made_Object
      range: crm:E65_Creation
      queries:
        - select: 'SELECT ?value WHERE {
            $subject crm:P128_carries/crm:P94i_was_created_by ?creation .
            ?creation crm:P9_consists_of ?value .
          }'
        - insert: 'INSERT {
            ?creation crm:P9_consists_of ?value .
          } WHERE {
            BIND(URI(CONCAT(STR($subject), "/creation")) as ?creation)
          }'

    - id: object_subproductions
      label: Production Steps
      descriptions: The production steps for an object
      datatype: xsd:anyURI
      display: hidden
      domain: crm:E22_Man-Made_Object
      range: E12_Production
      queries:
        - select: 'SELECT ?value WHERE {
            $subject crm:P108i_was_produced_by/crm:P9_consists_of ?value .
          }'
        - insert: 'INSERT {
            ?production crm:P9_consists_of ?value .
          } WHERE {
            BIND(URI(CONCAT(STR($subject), "/production")) as ?production)
          }'

    - id: object_carries_visual_item
      label: Visual Item
      description: The E36 Visual Item carried by the E22 Human-Made Object
      datatype: xsd:anyURI
      display: hidden
      minOccurs: 1
      maxOccurs: 1
      domain: crm:E22_Man-Made_Object
      range: crm:E36_Visual_item
      queries:
        - insert: 'INSERT { $subject crm:P128_carries $value} WHERE {}'
        - select: 'SELECT ?value WHERE {
            $subject crm:P128_carries ?value .
            ?value a crm:E36_Visual_Item .
          }'

    - id: object_production_date
      label: Production date
      description: The date an object has been produced
      domain: crm:E22_Man-Made_Object
      range: crm:E52_Time-Span
      queries:
        - select: 'SELECT ?value WHERE {
            $subject crm:P108i_was_produced_by/crm:P4_has_time-span ?value
          }'

    - id: I4_Proposition_Set_about_Subject
      label: I4 Proposition Set about Subject
      description: Takes a URI or string (which will be attached to the subject to create a URI) and defines it as a I4 Proposition set that is P129 about the subject and P67 refers to the proposition's subject 
      datatype: xsd:string
      queries:
        - insert: 'INSERT {
          ?valueSubject a crminf:I4_Proposition_Set ;
            crm:P129_is_about $subject ;
            crm:P67_refers_to ?propositionSubject .
        } WHERE {
          BIND((IF(STR(URI(?value)) = ?value, True,False)) as ?isURI)
          BIND(IF(?isURI, URI(?value), URI(CONCAT(STR($subject), STR(?value)))) as ?valueSubject)
          BIND(URI(STRBEFORE(STR($subject), "/proposition")) as ?propositionSubject)
        }'

    - id: subproduction_type
      label: Type of production
      minOccurs: 1
      maxOccurs: 1
      datatype: xsd:anyURI
      queries:
        - insert: 'INSERT {
            $subject a $value .
          } WHERE {}'
        - select: 'SELECT ?value WHERE {
            $subject a ?value .
            VALUES (?value) {
              (crm:E7_Activity)
              (crm:E11_Modification)
              (crm:E12_Production)
            }
          }' 
        - valueSet: 'SELECT ?value ?label WHERE {
          VALUES (?value ?label) {
              (crm:E12_Production "Production (engraving, printing, ...)")
              (crm:E11_Modification "Modification (colouring, ...)")
              (crm:E7_Activity "Activity (commissioning, publishing, ...)")
          }
        }'

    - id: P2_has_type
      label: Type
      datatype: xsd:anyURI
      queries:
        - select: 'SELECT ?value WHERE {
            $subject crm:P2_has_type ?value .
          }'
        - insert: 'INSERT {
            $subject crm:P2_has_type $value .
          } WHERE {}'
        - autosuggestion: 'PREFIX bds: <http://www.bigdata.com/rdf/search#>
            SELECT DISTINCT ?value ?label WHERE {
              ?value a crm:E55_Type ;
                rdfs:label ?label .
              ?label bds:search ?__token__ .
            } ORDER BY ?label
            LIMIT 10'
        - valueSet: 'SELECT ?value ?label  WHERE {
              ?value a crm:E55_Type ;
                rdfs:label ?label .
            } ORDER BY ?label
            LIMIT 100'

    - id: P9_consists_of-reversed
      label: Consists of (reversed)
      datatype: xsd:anyURI
      queries:
        - insert: 'INSERT {
            ?value crm:P9_consists_of $subject .
          } WHERE {}'
        - select: 'SELECT ?value WHERE {
            ?value crm:P9_consists_of $subject .
          }'

    - id: P14_carried_out_by
      label: Person
      description: The person or actor carrying out an event
      datatype: xsd:anyURI
      minOccurs: 0
      maxOccurs: 1
      queries:
        - select: 'SELECT ?value WHERE {
              $subject crm:P14_carried_out_by ?value .
            }'
        - insert: 'INSERT {
              $subject crm:P14_carried_out_by ?value .
            } WHERE {}'
        - autosuggestion: 'PREFIX bds: <http://www.bigdata.com/rdf/search#>
            SELECT DISTINCT ?value ?label WHERE {
              ?value a search:Person ;
                rdfs:label ?label .
              ?label bds:search ?__token__ .
            } ORDER BY ?label
            LIMIT 10'
        - valueSet: 'SELECT ?value ?label  WHERE {
              ?value a search:Person ;
                rdfs:label ?label .
            } ORDER BY ?label
            LIMIT 100'